---
sidebar_position: 4
---

# CaracterÃ­sticas Avanzadas

Antonella Framework incluye funcionalidades avanzadas que te permiten crear plugins mÃ¡s sofisticados y profesionales.

## ðŸ³ Docker Integration

Antonella Framework v1.8+ incluye integraciÃ³n completa con Docker para un entorno de desarrollo consistente.

### ConfiguraciÃ³n de Docker

```bash
# Iniciar el entorno Docker
php antonella docker

# O usando Docker Compose directamente
docker-compose up
```

### CaracterÃ­sticas del entorno Docker

- **WordPress**: VersiÃ³n completa de WordPress
- **MySQL**: Base de datos configurada automÃ¡ticamente
- **Puerto**: Disponible en `http://localhost:8080`
- **Recarga automÃ¡tica**: Los cambios se ven en tiempo real

:::tip Ventajas de Docker

- Entorno aislado y reproducible
- No necesitas configurar WordPress manualmente
- FÃ¡cil compartir con tu equipo
- Evita conflictos con otros proyectos

:::

## ðŸŒ APIs REST Endpoints

Crea endpoints de API REST de manera sencilla configurando arrays en `config.php`.

### ConfiguraciÃ³n bÃ¡sica

```php
/**
 * REST API Endpoints
 * Define custom API endpoints
 */
public $api_endpoints = [
    [
        'endpoint' => 'mi-plugin/v1/datos',
        'methods' => 'GET',
        'callback' => 'MiControlador::obtenerDatos',
        'permission' => 'read'
    ],
    [
        'endpoint' => 'mi-plugin/v1/datos',
        'methods' => 'POST',
        'callback' => 'MiControlador::crearDato',
        'permission' => 'edit_posts'
    ]
];
```

### Ejemplo de controlador API

```php
<?php

namespace TU_NAMESPACE\Controllers;

class ApiController {
    
    public static function obtenerDatos($request) {
        $datos = [
            'mensaje' => 'Datos obtenidos exitosamente',
            'datos' => [
                'id' => 1,
                'nombre' => 'Ejemplo'
            ]
        ];
        
        return new \WP_REST_Response($datos, 200);
    }
    
    public static function crearDato($request) {
        $parametros = $request->get_json_params();
        
        // Validar y procesar datos
        if (empty($parametros['nombre'])) {
            return new \WP_Error('datos_invalidos', 'El nombre es requerido', ['status' => 400]);
        }
        
        // LÃ³gica para crear el dato
        $resultado = [
            'mensaje' => 'Dato creado exitosamente',
            'id' => 123
        ];
        
        return new \WP_REST_Response($resultado, 201);
    }
}
```

### Uso de las APIs

```javascript
// GET request
fetch('/wp-json/mi-plugin/v1/datos')
    .then(response => response.json())
    .then(data => console.log(data));

// POST request
fetch('/wp-json/mi-plugin/v1/datos', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-WP-Nonce': wpApiSettings.nonce
    },
    body: JSON.stringify({
        nombre: 'Nuevo dato'
    })
})
.then(response => response.json())
.then(data => console.log(data));
```

## ðŸŽ¨ Blade Template Engine

Sistema de plantillas potente y familiar para desarrolladores Laravel.

### ConfiguraciÃ³n

Durante la instalaciÃ³n, responde "yes" cuando se pregunte por Blade:

```bash
You need add blade? (Template system)? Type 'yes' or 'y' to continue: yes
```

### Estructura de vistas

```
resources/
â””â”€â”€ views/
    â””â”€â”€ template/
        â”œâ”€â”€ layout.blade.php
        â”œâ”€â”€ admin/
        â”‚   â””â”€â”€ dashboard.blade.php
        â””â”€â”€ public/
            â””â”€â”€ form.blade.php
```

### Ejemplo de plantilla

```php
{{-- resources/views/template/layout.blade.php --}}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@yield('title', 'Mi Plugin')</title>
</head>
<body>
    <div class="container">
        <h1>@yield('title')</h1>
        
        @yield('content')
    </div>
</body>
</html>
```

```php
{{-- resources/views/template/admin/dashboard.blade.php --}}
@extends('template.layout')

@section('title', 'Dashboard del Plugin')

@section('content')
    <div class="dashboard">
        <h2>Bienvenido, {{ $usuario }}</h2>
        
        @if($configurado)
            <p>El plugin estÃ¡ configurado correctamente.</p>
        @else
            <div class="alert alert-warning">
                <p>El plugin necesita configuraciÃ³n adicional.</p>
                <a href="{{ $url_configuracion }}" class="button">Configurar ahora</a>
            </div>
        @endif
        
        <div class="estadisticas">
            <h3>EstadÃ­sticas</h3>
            <ul>
                @foreach($estadisticas as $clave => $valor)
                    <li><strong>{{ $clave }}:</strong> {{ $valor }}</li>
                @endforeach
            </ul>
        </div>
    </div>
@endsection
```

### Uso en controladores

```php
<?php

namespace TU_NAMESPACE\Controllers;

class AdminController {
    
    public function mostrarDashboard() {
        $datos = [
            'usuario' => wp_get_current_user()->display_name,
            'configurado' => get_option('mi_plugin_configurado', false),
            'url_configuracion' => admin_url('admin.php?page=mi-plugin-config'),
            'estadisticas' => [
                'Total de registros' => 150,
                'Registros hoy' => 12,
                'Usuarios activos' => 45
            ]
        ];
        
        echo view('admin.dashboard', $datos);
    }
}
```

### Helper view()

El helper `view()` simplifica el uso de Blade:

```php
// Renderizar una vista
echo view('mi-vista', ['variable' => 'valor']);

// Renderizar con datos
echo view('admin.dashboard', compact('usuario', 'configurado'));
```

## ðŸ”§ Helpers Personalizados

Crea helpers reutilizables para tu plugin.

### Crear un helper

```bash
php antonella helper UtilHelper
```

### Ejemplo de helper

```php
<?php

namespace TU_NAMESPACE\Helpers;

class UtilHelper {
    
    public static function formatearFecha($fecha) {
        return date('d/m/Y H:i', strtotime($fecha));
    }
    
    public static function validarEmail($email) {
        return filter_var($email, FILTER_VALIDATE_EMAIL);
    }
    
    public static function generarSlug($texto) {
        return sanitize_title($texto);
    }
}
```

### Uso de helpers

```php
use TU_NAMESPACE\Helpers\UtilHelper;

// En cualquier parte de tu cÃ³digo
$fecha_formateada = UtilHelper::formatearFecha('2024-01-15 10:30:00');
$email_valido = UtilHelper::validarEmail('usuario@ejemplo.com');
$slug = UtilHelper::generarSlug('Mi TÃ­tulo Genial');
```

## ðŸŽ® Bloques de Gutenberg

Crea bloques personalizados para el editor de WordPress.

### Crear un bloque

```bash
php antonella block mi-primer-bloque
```

### Estructura generada

```
src/
â”œâ”€â”€ Controllers/
â”‚   â””â”€â”€ GutenbergController.php
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ mi-primer-bloque.js
â””â”€â”€ blocks/
    â””â”€â”€ mi-primer-bloque/
        â”œâ”€â”€ block.json
        â””â”€â”€ edit.js
```

### Ejemplo de bloque

```javascript
// assets/js/mi-primer-bloque.js
const { registerBlockType } = wp.blocks;
const { RichText } = wp.blockEditor;

registerBlockType('mi-plugin/mi-primer-bloque', {
    title: 'Mi Primer Bloque',
    icon: 'admin-site',
    category: 'widgets',
    attributes: {
        content: {
            type: 'string',
            source: 'html',
            selector: 'p'
        }
    },
    edit: function(props) {
        return (
            <RichText
                tagName="p"
                className={props.className}
                value={props.attributes.content}
                onChange={(content) => props.setAttributes({ content })}
                placeholder="Escribe tu contenido aquÃ­..."
            />
        );
    },
    save: function(props) {
        return (
            <RichText.Content
                tagName="p"
                value={props.attributes.content}
            />
        );
    }
});
```

:::tip Consejos para helpers

- MantÃ©n las funciones pequeÃ±as y enfocadas
- Usa mÃ©todos estÃ¡ticos para funciones de utilidad
- Agrupa funciones relacionadas en el mismo helper
- Documenta bien tus funciones

:::

Estas caracterÃ­sticas avanzadas te permiten crear plugins mÃ¡s potentes y mantenibles con Antonella Framework.
