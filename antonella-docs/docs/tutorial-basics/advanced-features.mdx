---
sidebar_position: 4
---

# Advanced Features

Antonella Framework includes advanced functionalities that allow you to create more sophisticated and professional plugins.

## ðŸ³ Docker Integration

Antonella Framework v1.8+ includes complete Docker integration for consistent development environment.

### Docker Configuration

```bash
# Start Docker environment
php antonella docker

# Or using Docker Compose directly
docker-compose up
```

### Docker Environment Features

- **WordPress**: Full WordPress version
- **MySQL**: Database automatically configured
- **Port**: Available at `http://localhost:8080`
- **Auto-reload**: Changes are seen in real-time

:::tip Docker Advantages

- Isolated and reproducible environment
- No need to manually configure WordPress
- Easy to share with your team
- Avoids conflicts with other projects

:::

## ðŸŒ REST API Endpoints

Create REST API endpoints easily by configuring arrays in `config.php`.

### Basic Configuration

```php
/**
 * REST API Endpoints
 * Define custom API endpoints
 */
public $api_endpoints = [
    [
        'endpoint' => 'my-plugin/v1/data',
        'methods' => 'GET',
        'callback' => 'MyController::getData',
        'permission' => 'read'
    ],
    [
        'endpoint' => 'my-plugin/v1/data',
        'methods' => 'POST',
        'callback' => 'MyController::createData',
        'permission' => 'edit_posts'
    ]
];
```

### API Controller Example

```php
<?php

namespace YOUR_NAMESPACE\Controllers;

class ApiController {
    
    public static function getData($request) {
        $data = [
            'message' => 'Data retrieved successfully',
            'data' => [
                'id' => 1,
                'name' => 'Example'
            ]
        ];
        
        return new \WP_REST_Response($data, 200);
    }
    
    public static function createData($request) {
        $params = $request->get_json_params();
        
        // Validate and process data
        if (empty($params['name'])) {
            return new \WP_Error('invalid_data', 'Name is required', ['status' => 400]);
        }
        
        // Logic to create data
        $result = [
            'message' => 'Data created successfully',
            'id' => 123
        ];
        
        return new \WP_REST_Response($result, 201);
    }
}
```

### Using the APIs

```javascript
// GET request
fetch('/wp-json/my-plugin/v1/data')
    .then(response => response.json())
    .then(data => console.log(data));

// POST request
fetch('/wp-json/my-plugin/v1/data', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json',
        'X-WP-Nonce': wpApiSettings.nonce
    },
    body: JSON.stringify({
        name: 'New data'
    })
})
.then(response => response.json())
.then(data => console.log(data));
```

## ðŸŽ¨ Blade Template Engine

Powerful template system familiar to Laravel developers.

### Configuration

During installation, answer "yes" when asked about Blade:

```bash
You need add blade? (Template system)? Type 'yes' or 'y' to continue: yes
```

### Views Structure

```
resources/
â””â”€â”€ views/
    â””â”€â”€ template/
        â”œâ”€â”€ layout.blade.php
        â”œâ”€â”€ admin/
        â”‚   â””â”€â”€ dashboard.blade.php
        â””â”€â”€ public/
            â””â”€â”€ form.blade.php
```

### Template Example

```php
{{-- resources/views/template/layout.blade.php --}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@yield('title', 'My Plugin')</title>
</head>
<body>
    <div class="container">
        <h1>@yield('title')</h1>
        
        @yield('content')
    </div>
</body>
</html>
```

```php
{{-- resources/views/template/admin/dashboard.blade.php --}}
@extends('template.layout')

@section('title', 'Plugin Dashboard')

@section('content')
    <div class="dashboard">
        <h2>Welcome, {{ $user }}</h2>
        
        @if($configured)
            <p>The plugin is configured correctly.</p>
        @else
            <div class="alert alert-warning">
                <p>The plugin needs additional configuration.</p>
                <a href="{{ $config_url }}" class="button">Configure now</a>
            </div>
        @endif
        
        <div class="statistics">
            <h3>Statistics</h3>
            <ul>
                @foreach($stats as $key => $value)
                    <li><strong>{{ $key }}:</strong> {{ $value }}</li>
                @endforeach
            </ul>
        </div>
    </div>
@endsection
```

### Usage in Controllers

```php
<?php

namespace YOUR_NAMESPACE\Controllers;

class AdminController {
    
    public function showDashboard() {
        $data = [
            'user' => wp_get_current_user()->display_name,
            'configured' => get_option('my_plugin_configured', false),
            'config_url' => admin_url('admin.php?page=my-plugin-config'),
            'stats' => [
                'Total records' => 150,
                'Records today' => 12,
                'Active users' => 45
            ]
        ];
        
        echo view('admin.dashboard', $data);
    }
}
```

### view() Helper

The `view()` helper simplifies Blade usage:

```php
// Render a view
echo view('my-view', ['variable' => 'value']);

// Render with data
echo view('admin.dashboard', compact('user', 'configured'));
```

## ðŸ”§ Custom Helpers

Create reusable helpers for your plugin.

### Create a Helper

```bash
php antonella helper UtilHelper
```

### Helper Example

```php
<?php

namespace YOUR_NAMESPACE\Helpers;

class UtilHelper {
    
    public static function formatDate($date) {
        return date('m/d/Y H:i', strtotime($date));
    }
    
    public static function validateEmail($email) {
        return filter_var($email, FILTER_VALIDATE_EMAIL);
    }
    
    public static function generateSlug($text) {
        return sanitize_title($text);
    }
}
```

### Using Helpers

```php
use YOUR_NAMESPACE\Helpers\UtilHelper;

// Anywhere in your code
$formatted_date = UtilHelper::formatDate('2024-01-15 10:30:00');
$valid_email = UtilHelper::validateEmail('user@example.com');
$slug = UtilHelper::generateSlug('My Great Title');
```

## ðŸŽ® Gutenberg Blocks

Create custom blocks for the WordPress editor.

### Create a Block

```bash
php antonella block my-first-block
```

### Generated Structure

```
src/
â”œâ”€â”€ Controllers/
â”‚   â””â”€â”€ GutenbergController.php
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ my-first-block.js
â””â”€â”€ blocks/
    â””â”€â”€ my-first-block/
        â”œâ”€â”€ block.json
        â””â”€â”€ edit.js
```

### Block Example

```javascript
// assets/js/my-first-block.js
const { registerBlockType } = wp.blocks;
const { RichText } = wp.blockEditor;

registerBlockType('my-plugin/my-first-block', {
    title: 'My First Block',
    icon: 'admin-site',
    category: 'widgets',
    attributes: {
        content: {
            type: 'string',
            source: 'html',
            selector: 'p'
        }
    },
    edit: function(props) {
        return (
            <RichText
                tagName="p"
                className={props.className}
                value={props.attributes.content}
                onChange={(content) => props.setAttributes({ content })}
                placeholder="Write your content here..."
            />
        );
    },
    save: function(props) {
        return (
            <RichText.Content
                tagName="p"
                value={props.attributes.content}
            />
        );
    }
});
```

:::tip Helper Tips

- Keep functions small and focused
- Use static methods for utility functions
- Group related functions in the same helper
- Document your functions well

:::

These advanced features allow you to create more powerful and maintainable plugins with Antonella Framework.
